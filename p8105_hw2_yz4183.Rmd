---
title: "P8105 HW2"
author: "Yuchen Zheng"
date: "10/6/2021"
output: html_document
---


```{r, echo = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
library(tidyr)
```

## Problem 1
```{r}
trash_df = 
  read_excel("Trash_Wheel.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N535") %>%
  janitor::clean_names() %>%
  filter(dumpster != "NA") %>%
  mutate(sports_balls = round(sports_balls, digits = 0))
      
```

```{r}
prcp_2018 = 
  read_excel("Trash_Wheel.xlsx", sheet = "2018 Precipitation", skip = 1) %>%
  drop_na() %>%
  mutate(Year = 2018)
```

```{r}
prcp_2019 = 
  read_excel("Trash_Wheel.xlsx", sheet = "2019 Precipitation", skip = 1) %>%
  drop_na() %>%
  mutate(Year = 2019)
```

```{r}
prcp_combine = 
  full_join(prcp_2018, prcp_2019) %>%
  janitor::clean_names() %>%
  mutate(month = month.name[month])

```

## Problem 2

First, clean the data in pols-month.csv. Use separate() to break up the variable mon into integer variables year, month, and day; replace month number with month name; create a president variable taking values gop and dem, and remove prez_dem and prez_gop; and remove the day variable.
```{r}
pols_df = 
  read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  separate(mon, into = c("year", "month", "day")) %>%
  mutate(month = as.numeric(month), year = as.numeric(year)) %>%
  mutate(month = month.name[month]) %>%
  mutate(president = ifelse(prez_gop == 0, "dem", "gop")) %>%
  select(-c(prez_dem, prez_gop, day))
```

Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.

```{r}
snp_df = 
  read_csv("fivethirtyeight_datasets/snp.csv") %>%
  separate(date, into = c("month", "day", "year")) %>%
  mutate(month = as.numeric(month), year = as.numeric(year)) %>%
  mutate(year = ifelse(year < 50, year + 2000, year + 1900)) %>% 
  arrange(year, month) %>%
  mutate(month = month.name[month]) %>%
  relocate(year, month)
```

Third, tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from “wide” to “long” format; ensuring that key variables have the same name; and ensuring that key variables take the same values.

```{r}
unemployment_df = 
  read_csv("fivethirtyeight_datasets/unemployment.csv") %>%
  rename(year = Year) %>%
  pivot_longer(Jan:Dec, names_to = "month", values_to = "pct_unemploy") %>%
  mutate(month = match(month, month.abb)) %>% 
  mutate(month = month.name[month])

```

Join the datasets by merging snp into pols, and merging unemployment into the result.
```{r}
result = 
  left_join(x = pols_df, y = snp_df) %>%
  left_join(unemployment_df)

```

## problem 3

Load and tidy the data. Note that, although these data may seem fairly well formatted initially, the names of a categorical predictor and the case structure of string variables changed over time; you’ll need to address this in your data cleaning. Also, some rows seem duplicated, and these will need to be removed (hint: google something like “dplyr remove duplicate rows” to get started).

```{r}
baby_names = read_csv("./Popular_Baby_Names.csv")
```

